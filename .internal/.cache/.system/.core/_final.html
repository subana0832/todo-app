<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 1s, color 1s;
    }

    .container {
      max-width: 500px;
      width: 100%;
      padding: 0 20px;
      text-align: center;
    }

    /* ============= route-a ============= */
    body.route-invited {
      background: #0a0a0a;
      color: #e0e0e0;
    }

    .invited-text {
      font-size: 16px;
      line-height: 2;
      opacity: 0;
    }

    .invited-text.visible {
      opacity: 1;
      transition: opacity 1s ease;
    }

    .invited-text .line {
      display: block;
      opacity: 0;
    }

    .invited-text .line.show {
      animation: typeIn 0.8s ease forwards;
    }

    @keyframes typeIn {
      from { opacity: 0; transform: translateY(5px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .todo-mock {
      margin-top: 40px;
      text-align: left;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .todo-mock.visible {
      opacity: 1;
    }

    .todo-mock-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      background: #1a1a1a;
      border-radius: 6px;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .todo-mock-item .checkbox {
      width: 16px;
      height: 16px;
      border: 1px solid #555;
      border-radius: 3px;
    }

    .share-area {
      margin-top: 30px;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .share-area.visible {
      opacity: 1;
    }

    .share-btn {
      display: inline-block;
      padding: 10px 24px;
      background: #e0e0e0;
      color: #0a0a0a;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.3s;
    }

    .share-btn:hover {
      background: #fff;
    }

    .complice-note {
      margin-top: 20px;
      font-size: 9px;
      color: #333;
    }

    /* ============= route-b ============= */
    body.route-sealed {
      background: #fafafa;
      color: #333;
    }

    .sealed-text {
      font-size: 16px;
      line-height: 2;
      color: #666;
      opacity: 0;
      transition: opacity 1.5s ease;
    }

    .sealed-text.visible {
      opacity: 1;
    }

    .sealed-todo {
      margin-top: 40px;
      text-align: left;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .sealed-todo.visible {
      opacity: 1;
    }

    .sealed-todo-item {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 12px 14px;
      background: #fff;
      border-radius: 6px;
      margin-bottom: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.08);
      font-size: 14px;
      color: #999;
      text-decoration: line-through;
    }

    .sealed-todo-item .checkmark {
      color: #4caf50;
      font-size: 16px;
    }

    .sealed-share-area {
      margin-top: 30px;
      opacity: 0;
      transition: opacity 1s ease;
    }

    .sealed-share-area.visible {
      opacity: 1;
    }

    .sealed-share-btn {
      display: inline-block;
      padding: 10px 24px;
      background: #333;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      text-decoration: none;
      transition: background 0.3s;
    }

    .sealed-share-btn:hover {
      background: #555;
    }
  </style>
</head>
<body>
  <div id="invitedContent" class="container" style="display: none;">
    <div class="invited-text" id="invitedText">
      <span class="line" id="line1"></span>
      <span class="line" id="line2"></span>
    </div>
    <div class="todo-mock" id="todoMock">
      <div class="todo-mock-item">
        <div class="checkbox"></div>
        <span id="mockTask"></span>
      </div>
    </div>
    <div class="share-area" id="shareArea">
      <a class="share-btn" id="shareBtn" target="_blank"></a>
      <div class="complice-note" id="compliceNote"></div>
    </div>
  </div>

  <div id="sealedContent" class="container" style="display: none;">
    <div class="sealed-text" id="sealedText"></div>
    <div class="sealed-todo" id="sealedTodo">
      <div class="sealed-todo-item">
        <span class="checkmark">&#x2713;</span>
        <span id="sealedTask"></span>
      </div>
    </div>
    <div class="sealed-share-area" id="sealedShareArea">
      <a class="sealed-share-btn" id="sealedShareBtn" target="_blank"></a>
    </div>
  </div>

  <script>
    (function() {
      var _r = new URLSearchParams(window.location.search).get('route');
      var _sr = localStorage.getItem('_route');

      if (!_r || !_sr || _r !== _sr) {
        window.location.href = 'index.html';
        return;
      }

      var _u = 'https://github.com/subana0832/todo-app';

      if (_r === 'invited') {
        document.body.className = 'route-invited';
        document.getElementById('invitedContent').style.display = 'block';
        document.getElementById('line1').textContent = '\u62db\u3044\u3066\u304f\u308c\u3066\u3001\u3042\u308a\u304c\u3068\u3046';
        document.getElementById('line2').textContent = '\u3042\u306a\u305f\u3082\u3001\u5e83\u3081\u305a\u306b\u306f\u3044\u3089\u308c\u306a\u3044\u3002';
        document.getElementById('mockTask').textContent = '\u3053\u306e\u30a2\u30d7\u30ea\u3092\u8ab0\u304b\u306b\u6559\u3048\u308b';
        document.getElementById('shareBtn').textContent = '\u62e1\u6563\u3059\u308b';
        document.getElementById('compliceNote').textContent = '/* \u3042\u306a\u305f\u306f3\u4eba\u76ee\u306e\u5171\u72af\u8005\u3067\u3059 */';

        var _t = document.getElementById('invitedText');
        var _l = [document.getElementById('line1'), document.getElementById('line2')];
        setTimeout(function(){ _t.classList.add('visible') }, 500);
        setTimeout(function(){ _l[0].classList.add('show') }, 1000);
        setTimeout(function(){ _l[1].classList.add('show') }, 3000);
        setTimeout(function(){ document.getElementById('todoMock').classList.add('visible') }, 5000);
        setTimeout(function(){ document.getElementById('shareArea').classList.add('visible') }, 6500);

        var _st = encodeURIComponent('\u306a\u3093\u304b\u4e0d\u7a4f\u306a\u30ea\u30dd\u30b8\u30c8\u30ea\u898b\u3064\u3051\u305f\u3093\u3060\u3051\u3069\u8a73\u3057\u3044\u4eba\u3044\u308b\uff1f\n' + _u + '\n\u0023\u3053\u306eTodo\u30a2\u30d7\u30ea\u306a\u3093\u304b\u304a\u304b\u3057\u3044');
        document.getElementById('shareBtn').href = 'https://x.com/intent/tweet?text=' + _st;

        localStorage.removeItem('_route');
        localStorage.removeItem('_dc');
        localStorage.removeItem('tasks');

      } else if (_r === 'sealed') {
        document.body.className = 'route-sealed';
        document.getElementById('sealedContent').style.display = 'block';
        document.getElementById('sealedText').innerHTML = '\u300c\u7e67\uff6a\u7e5d\u69ed\u304a\u7e5d\u5f31\u3048\u7e67\uff77\u7e5d\uff6d\u300d\u306f\u3001<br>\u3042\u306a\u305f\u306e\u300c\u3046\u3057\u308d\u300d\u304b\u3089\u5f15\u304d\u5265\u304c\u3055\u308c\u307e\u3057\u305f\u3002';
        document.getElementById('sealedTask').textContent = '\u3046\u3057\u308d';
        document.getElementById('sealedShareBtn').textContent = '\u5c01\u5370\u3057\u307e\u3057\u305f';

        setTimeout(function(){ document.getElementById('sealedText').classList.add('visible') }, 1000);
        setTimeout(function(){ document.getElementById('sealedTodo').classList.add('visible') }, 3000);
        setTimeout(function(){ document.getElementById('sealedShareArea').classList.add('visible') }, 4500);

        var _st = encodeURIComponent('\u300c\u7e67\uff6a\u7e5d\u69ed\u304a\u7e5d\u5f31\u3048\u7e67\uff77\u7e5d\uff6d\u300d\u306f\u5c01\u5370\u3055\u308c\u307e\u3057\u305f\u3002\n' + _u + '\n\u0023\u3053\u306eTodo\u30a2\u30d7\u30ea\u306a\u3093\u304b\u304a\u304b\u3057\u3044');
        document.getElementById('sealedShareBtn').href = 'https://x.com/intent/tweet?text=' + _st;

        localStorage.removeItem('tasks');
        localStorage.removeItem('_dc');
      }
    })();
  </script>
</body>
</html>
